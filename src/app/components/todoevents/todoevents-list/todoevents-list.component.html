
<h1>Todo List</h1>

<!-- AS: per DEBUG -->
<!-- <p>JSON </p>
{{todoEvents | json}}
<p></p> -->


  <table  class="table table-hover">
    <thead>
      <tr>
        <th>id</th>
        <th>UserID</th>
        <th>CausaleID</th>
        <th>TicketID</th>
        <th>Titolo</th>
        <th>Dettagli</th>
        <th>Dt</th>
        <th>H_ini</th>
        <th></th>
      </tr>
    </thead>

    <tbody>
      <tr  *ngFor="let objTodo of todoEvents">
        <td >{{objTodo.id}}</td>
        <td >{{objTodo.userID}}</td>
        <td >{{objTodo.causaleID}}</td>
        <td >{{objTodo.ticketID}} </td>
        <td  class="min100">{{objTodo.titolo}} </td>
        <td  class="min100">{{objTodo.dettagli}} </td>
        <td  class="min100">{{objTodo.dt  | date: 'dd/MM/yyyy'}} </td>
        <td  class="min100">{{objTodo.h_Ini | date:'HH:mm'}} </td>
      </tr>
    </tbody>
  </table>

    <div class="grid-table">
      <div class="thead">
          <div class="tr">
              <div class="td">ID</div>
              <div class="td">Titolo</div>
              <div class="td">Dettaglio</div>
              <div class="td">
                 <button class="btn btn-outline-dark" (click)="addTodoEventsForm()">
                  <mat-icon>add</mat-icon> 
                    Nuova riga
                  </button>        
              </div>
              
              <!--
              <div class="td">
                  <span *ngIf="notification" class="elementToFadeInAndOut">
                      <i class="fas fa-check-circle {{notification.class}}"></i>
                      
                      {{notification.message}}
                  </span>
              </div>
            -->
          </div>
      </div>
      <div class="tbody">
        <!-- <form class="tr" [formGroup]="fgroup" *ngFor="let fgroup of todoEventsForms.controls; let i=index;">-->
        <form class="tr" [formGroup]="fgroup" *ngFor="let fgroup of todoEventsForms.controls; let i=index;" (submit)="recordSubmit(fgroup)">
          <div class="td">
            <input   class="form-control" formControlName="id">
          </div>  
          <div class="td">
              <input   class="form-control" formControlName="titolo">
          </div>
          <div class="td">
              <input   class="form-control" formControlName="dettagli">
          </div>
          <!--
            <div class="td">
                <input   class="form-control" formControlName="bankID">
                <select   class="form-control" formControlName="bankID">  
                    <option value="0">Select</option>
                    <option *ngFor="let item of bankList" value="{{item.bankID}}">{{item.bankName}}</option>
                </select>
            </div>                                
            <div class="td">
                <button type="submit" class="btn btn-success" [disabled]="fgroup.invalid"
                    [ngClass]="fgroup.get('bankAccountID').value==0?'btn-success':'btn-outline-dark'">
                    <mat-icon>save_alt</mat-icon>
                    {{fgroup.get('bankAccountID').value==0?'Submit':'Update'}}
                </button>
                <button class="btn btn-light ml-1" (click)="onDelete(fgroup.get('bankAccountID').value,i)">
                    <mat-icon>delete</mat-icon>
                  {{fgroup.get('bankAccountID').value==0?'Submit':'Update'}}
                </button>
            </div>   
          -->        
          <div class="td">
            <button type="submit" class="btn btn-success" [disabled]="fgroup.invalid"
                [ngClass]="fgroup.get('id').value==0 ?'btn-success':'btn-outline-dark'">
                <mat-icon>save_alt</mat-icon>
             <!--   {{fgroup.get('id').value==0 ? 'Submit':'Update'}} -->
            </button>
            <button class="btn btn-light ml-1"  (click)="onDelete(fgroup.get('id').value,i)">
                <mat-icon>delete</mat-icon>
            </button>
          
        </div>                     
        </form>
    </div>
  </div>

  <router-outlet></router-outlet>
  <app-snackbar></app-snackbar>
